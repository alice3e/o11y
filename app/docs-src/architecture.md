# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã Product Store

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Cloud Native –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∏ observability.

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é domain –æ–±–ª–∞—Å—Ç—å —Å —á–µ—Ç–∫–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
- **API-First –ø–æ–¥—Ö–æ–¥** - –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ REST API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- **Cloud Native –¥–∏–∑–∞–π–Ω** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è, 12-factor app principles, stateless —Å–µ—Ä–≤–∏—Å—ã
- **Observability by design** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏, —Ç—Ä–µ–π—Å–∏–Ω–≥–æ–º –∏ –∞–ª–µ—Ä—Ç–∞–º–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ** - –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ HTTP –≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å httpx
- **Security-first** - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å, –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- **Performance optimization** - NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, in-memory –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Fault tolerance** - health checks, graceful shutdown, circuit breaker patterns
- **Horizontal scalability** - ready –¥–ª—è Kubernetes –∏ container orchestration
- **Infrastructure as Code** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Docker Compose

## üèõÔ∏è –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

```mermaid
graph TB
    subgraph "üåê Client Layer"
        WEB[üñ•Ô∏è Web Browser]
        API_CLIENT[üì± API Client]
        LOCUST[üöÄ Load Testing<br/>Locust]
    end

    subgraph "üîÄ Gateway Layer"
        NGINX[üåê Nginx<br/>Reverse Proxy<br/>Port 80]
    end

    subgraph "üõçÔ∏è Business Services"
        BACKEND[üè™ Backend Service<br/>Products & Catalog<br/>Port 8000]
        CART[üõí Cart Service<br/>Shopping Cart<br/>Port 8001]
        ORDER[üì¶ Order Service<br/>Order Processing<br/>Port 8002]
        USER[üë§ User Service<br/>Authentication<br/>Port 8003]
    end

    subgraph "üìö Documentation Services"
        SWAGGER[üìã Swagger UI<br/>Unified API Docs]
        DOCS[üìñ MkDocs<br/>Project Documentation]
    end

    subgraph "üóÑÔ∏è Data Layer"
        CASSANDRA[üóÑÔ∏è Apache Cassandra<br/>Main Database<br/>Port 9042]
        MEMORY_CART[üíæ In-Memory<br/>Cart Storage]
        MEMORY_ORDER[üíæ In-Memory<br/>Order Storage]
        MEMORY_USER[üíæ In-Memory<br/>User Storage]
    end

    subgraph "üìä Observability Stack"
        PROM[üìä Prometheus<br/>Metrics Collection<br/>Port 9090]
        GRAFANA[üìà Grafana<br/>Dashboards<br/>Port 3000]
        NGINX_EXP[üìä Nginx Exporter<br/>Port 9113]
        MCAC[üìä MCAC Agent<br/>Cassandra Metrics<br/>Port 9103]
    end

    %% Client connections
    WEB --> NGINX
    API_CLIENT --> NGINX
    LOCUST --> NGINX
    
    %% Nginx routing
    NGINX --"/api/*"--> BACKEND
    NGINX --"/cart-api/*"--> CART
    NGINX --"/order-api/*"--> ORDER
    NGINX --"/user-api/*"--> USER
    NGINX --"/swagger/*"--> SWAGGER
    NGINX --"/docs/*"--> DOCS

    %% Inter-service communication
    CART --"Get Product Info"--> BACKEND
    CART --"Create Order"--> ORDER
    ORDER --"Notify Status"--> USER
    USER --"Get Cart Data"--> CART
    USER --"Get Orders"--> ORDER

    %% Data connections
    BACKEND --> CASSANDRA
    CART --> MEMORY_CART
    ORDER --> MEMORY_ORDER
    USER --> MEMORY_USER

    %% Monitoring connections
    BACKEND --> PROM
    CART --> PROM
    ORDER --> PROM
    USER --> PROM
    NGINX --> NGINX_EXP
    NGINX_EXP --> PROM
    CASSANDRA --> MCAC
    MCAC --> PROM
    PROM --> GRAFANA

    %% Styling
    classDef serviceBox fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef dataBox fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef infraBox fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef monitorBox fill:#fff3e0,stroke:#e65100,stroke-width:2px

    class BACKEND,CART,ORDER,USER serviceBox
    class CASSANDRA,MEMORY_CART,MEMORY_ORDER,MEMORY_USER dataBox
    class NGINX,SWAGGER,DOCS infraBox
    class PROM,GRAFANA,NGINX_EXP,MCAC monitorBox
```

## üõçÔ∏è –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã (–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã)

### üè™ Backend Service (–ø–æ—Ä—Ç 8000)
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–º**

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞: –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cassandra –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ä–æ–ª–µ–≤—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ HTTP –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ FastAPI Instrumentator
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ë–î (–≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤)
- Health checks –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è Cassandra
- Middleware –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üõí Cart Service (–ø–æ—Ä—Ç 8001)
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π –ø–æ–∫—É–ø–æ–∫**

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (–ø–æ item_id –∏–ª–∏ product_id)
- ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (checkout) —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Order Service
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —á–µ—Ä–µ–∑ Backend Service
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤, —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ—Ä–∑–∏–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ fallback —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

### üì¶ Order Service (–ø–æ—Ä—Ç 8002)
**–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏**

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤: CREATED ‚Üí PROCESSING ‚Üí SHIPPING ‚Üí DELIVERED
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è User Service –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º, –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
- Background tasks –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å User Service –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üë§ User Service (–ø–æ—Ä—Ç 8003)
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ä–æ–ª–∏
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–æ–ª–µ–π (admin/user)
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cart –∏ Order —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã
- ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
- CORS middleware –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üåê –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîÄ Nginx (–ø–æ—Ä—Ç 80)
**Reverse Proxy –∏ API Gateway**

**–§—É–Ω–∫—Ü–∏–∏:**
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞–º URL
- Load balancing –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket –¥–ª—è Locust –∏ real-time —Ñ—É–Ω–∫—Ü–∏–π
- –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ nginx-exporter –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- CORS headers –∏ security policies

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
```nginx
/api/*        ‚Üí Backend Service (8000)     # –¢–æ–≤–∞—Ä—ã –∏ –∫–∞—Ç–∞–ª–æ–≥
/cart-api/*   ‚Üí Cart Service (8001)        # –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫
/order-api/*  ‚Üí Order Service (8002)       # –ó–∞–∫–∞–∑—ã
/user-api/*   ‚Üí User Service (8003)        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
/swagger/*    ‚Üí Swagger UI                 # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
/docs/*       ‚Üí MkDocs                     # –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
/locust/*     ‚Üí Locust (WebSocket)         # –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
/search       ‚Üí Jaeger UI                  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç—Ä–µ–π—Å–∏–Ω–≥
/profiles/*   ‚Üí Profile Server             # –§–∞–π–ª—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Nginx-exporter —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –ø–æ—Ä—Ç 9113
- Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∏ latency
- Grafana –¥–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç throughput –∏ upstream performance

---

### üóÑÔ∏è Apache Cassandra (–ø–æ—Ä—Ç 9042)
**–û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- Keyspace: `store` —Å SimpleStrategy —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π (replication_factor=1 –¥–ª—è dev)
- –¢–∞–±–ª–∏—Ü–∞ `products` —Å UUID –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- MCAC Agent –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ JVM, –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Backend Service
- Health checks –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è gc_grace_seconds –¥–ª—è development –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- Keyspace: store
CREATE KEYSPACE store WITH replication = {
    'class': 'SimpleStrategy', 
    'replication_factor': '1'
};

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤
CREATE TABLE products (
    id UUID PRIMARY KEY,           -- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏–π –∫–ª—é—á
    name TEXT,                     -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    category TEXT,                 -- –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–∏–Ω–¥–µ–∫—Å)
    price DECIMAL,                 -- –¶–µ–Ω–∞ (–∏–Ω–¥–µ–∫—Å)
    quantity INT,                  -- –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ
    description TEXT,              -- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
    manufacturer TEXT              -- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
) WITH gc_grace_seconds = 3600;

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX products_category_idx ON products (category);
CREATE INDEX products_price_idx ON products (price);
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- MCAC Agent —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 100+ –º–µ—Ç—Ä–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 9103
- Cassandra Overview –¥–∞—à–±–æ—Ä–¥ –≤ Grafana
- System Metrics –¥–∞—à–±–æ—Ä–¥ –¥–ª—è OS-level –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ê–ª–µ—Ä—Ç—ã –Ω–∞ RPS, latency –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

### üîç Jaeger (–ø–æ—Ä—Ç 16686)
**–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- All-in-one deployment –¥–ª—è development/demo —Ü–µ–ª–µ–π
- OpenTelemetry integration –≤–æ –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- Automatic HTTP request tracing —Å context propagation
- Custom spans –¥–ª—è business operations –∏ database queries
- In-memory storage —Å rotation –¥–æ 50,000 —Ç—Ä–µ–π—Å–æ–≤

**–¢—Ä–µ–π—Å–∏–Ω–≥ flow:**
```mermaid
graph LR
    A[User Request] --> B[Nginx]
    B --> C[User Service]
    C --> D[Cart Service] 
    D --> E[Backend Service]
    E --> F[Cassandra]
    
    C -.->|span| G[Jaeger Collector]
    D -.->|span| G
    E -.->|span| G
    
    G --> H[Jaeger Query]
    H --> I[Jaeger UI]
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞:**
```python
# –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å:
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
OTEL_SERVICE_NAME=service-name
OTEL_RESOURCE_ATTRIBUTES=service.name=service-name,service.version=1.0.0
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞:**
- Spans received/dropped rate
- Collector queue length –∏ processing latency
- Storage utilization –∏ trace retention
- Jaeger-specific –¥–∞—à–±–æ—Ä–¥ –≤ Grafana

---

### üß™ Locust (–ø–æ—Ä—Ç 8089)
**–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

**–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
```python
class ShoppingUser(HttpUser):
    wait_time = between(2, 6)  # –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
    
    @task(10)  # 10x –≤–µ—Å - –æ—Å–Ω–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    def browse_products(self):
        # –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤
        
    @task(5)   # 5x –≤–µ—Å - —Å—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  
    def manage_cart(self):
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
        
    @task(1)   # 1x –≤–µ—Å - —Ä–µ–¥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    def place_order(self):
        # –ü–æ–ª–Ω—ã–π checkout flow —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Å—Ç–∞—Ç—É—Å–æ–≤
```

**OpenTelemetry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–π—Å–∏–Ω–≥ –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç Locust
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å production —Ç—Ä–µ–π—Å–∞–º–∏
- OTLP —ç–∫—Å–ø–æ—Ä—Ç –≤ Jaeger –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ performance –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

**WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- Real-time updates —á–µ—Ä–µ–∑ Nginx WebSocket proxy
- Live —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ Locust Web UI
- Dynamic scaling —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ restart

---

### ‚ö° Performance Profiler
**–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
@profile_endpoint("get_products")  # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è auto-profiling
async def get_products(...):
    # Automatic cProfile collection
    # Snakeviz-compatible .prof files
    # HTTP endpoints –¥–ª—è download –ø—Ä–æ—Ñ–∏–ª–µ–π
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:**
- GET `/profiles/` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö .prof —Ñ–∞–π–ª–æ–≤
- Backend Service: products CRUD, categories, search
- Cart Service: cart operations, stock validation
- Order Service: order creation, status updates  
- User Service: authentication, profile aggregation

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
# Download –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π:
curl http://localhost/profiles/get_products.prof > profile.prof
snakeviz profile.prof  # Local analysis
```

---

### üìö Swagger UI & Documentation
**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

**Unified API Documentation:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ FastAPI specs
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö 4 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- Interactive testing –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- JWT token integration –¥–ª—è protected endpoints
- Real-time API —Å—Ö–µ–º—ã –∏ examples

**MkDocs Project Documentation:**
- Comprehensive architectural documentation
- Step-by-step deployment guides
- API usage examples –∏ best practices
- Monitoring –∏ troubleshooting guides
- Performance tuning recommendations

## üìä –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Observability Stack)

### üìà Prometheus (–ø–æ—Ä—Ç 9090)
**–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫**

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ —Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- 8 job targets: –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã + nginx + cassandra
- 50+ custom –º–µ—Ç—Ä–∏–∫ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- Retention: 15 –¥–Ω–µ–π –º–µ—Ç—Ä–∏–∫ –≤ TSDB
- Alert rules —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —ç—Å–∫–∞–ª–∞—Ü–∏–µ–π –≤ Alertmanager

**–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
```yaml
# HTTP –º–µ—Ç—Ä–∏–∫–∏ (–≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã)
http_request_duration_seconds_bucket    # Latency histograms
http_requests_total                     # Request counter by endpoint/status
http_requests_concurrent               # Active connections

# –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
user_registrations_total               # –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
cart_items_added_total                 # –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
orders_created_total                   # –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
product_views_total                    # –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Ç–æ–≤–∞—Ä–æ–≤

# Infrastructure –º–µ—Ç—Ä–∏–∫–∏
cassandra_query_duration_seconds       # Database latency
nginx_http_requests_total              # Gateway throughput
process_resident_memory_bytes          # Memory usage
```

---

### üìä Grafana (–ø–æ—Ä—Ç 3000)
**–°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–∞—à–±–æ—Ä–¥–æ–≤**

**7 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤:**

#### 1. **Backend Service Dashboard**
- Products CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ latency
- Cassandra query performance –∏ connection pool
- Custom business metrics –ø–æ —Ç–æ–≤–∞—Ä–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- JVM memory usage –∏ garbage collection statistics

#### 2. **Cart Service Dashboard**  
- Cart operations (add/remove/update) metrics
- Stock validation failures –∏ retry statistics
- Shopping cart value distributions –∏ popular products
- Inter-service call latency (Backend API calls)

#### 3. **Order Service Dashboard**
- Order lifecycle metrics (Created‚ÜíDelivered)
- Average delivery time –∏ order value distributions
- Background task performance –∏ async processing
- User Service integration metrics

#### 4. **User Service Dashboard**
- Registration rate –∏ authentication statistics
- JWT token usage –∏ session management
- Profile aggregation performance
- Password hashing –∏ security metrics

#### 5. **Nginx Gateway Dashboard**
- Request rate –∏ response time –ø–æ service routes
- Upstream latency –∏ connection pooling statistics
- Error rate distribution –ø–æ HTTP status codes
- WebSocket connections –¥–ª—è Locust integration

#### 6. **Cassandra Database Dashboard**
- JVM heap usage, GC duration, thread pools
- CQL query latency –∏ throughput statistics  
- Disk I/O, compaction queue –∏ SSTable count
- Node health –∏ cluster topology metrics

#### 7. **Jaeger Tracing Dashboard**
- Spans received rate –∏ storage statistics
- Trace duration distributions –∏ error analysis
- Collector performance –∏ queue length monitoring
- Go runtime metrics –¥–ª—è Jaeger processes

**–ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- P99 latency > 500ms –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Error rate > 5% –¥–ª—è –ª—é–±–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞  
- Cassandra RPS > 100 –¥–ª—è database overload
- Memory usage > 80% –¥–ª—è any container

---

### üö® Alertmanager (–ø–æ—Ä—Ç 9093)
**–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–∞–º–∏**

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤:**
```yaml
# 4 —Ç–∏–ø–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤:
1. BackendHighP99Latency     # P99 > 500ms –Ω–∞ Backend API
2. CartServiceP99Latency     # P99 > 500ms –Ω–∞ Cart Service  
3. OrderServiceP99Latency    # P99 > 500ms –Ω–∞ Order Service
4. CassandraHighRPS         # RPS > 100 –Ω–∞ Cassandra
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –∫–∞–Ω–∞–ª
- HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ severity level
- Auto-resolution —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
- group_wait: 10s - –æ–∂–∏–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤
- group_interval: 1m - –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤  
- repeat_interval: 5m - –ø–æ–≤—Ç–æ—Ä –¥–ª—è unfixed –∞–ª–µ—Ä—Ç–æ–≤

**–î–æ—Å—Ç—É–ø:**
- URL: http://localhost:3000
- –õ–æ–≥–∏–Ω: admin / admin
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Prometheus

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### üõí –¢–∏–ø–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π

```mermaid
sequenceDiagram
    participant U as User
    participant N as Nginx
    participant US as User Service
    participant B as Backend
    participant C as Cart Service
    participant O as Order Service

    U->>N: POST /user-api/users/register
    N->>US: Register user
    US-->>N: User created
    N-->>U: Registration success

    U->>N: POST /user-api/token
    N->>US: Authenticate
    US-->>N: JWT token
    N-->>U: Token response

    U->>N: GET /api/products/?category=–§—Ä—É–∫—Ç—ã
    N->>B: Get products (with JWT)
    B-->>N: Products list
    N-->>U: Products response

    U->>N: POST /cart-api/cart/items
    N->>C: Add to cart (with JWT)
    C->>B: Validate product & stock
    B-->>C: Product info
    C-->>N: Item added
    N-->>U: Cart update

    U->>N: POST /user-api/users/me/orders
    N->>US: Create order
    US->>C: Checkout cart
    C->>O: Create order
    O-->>C: Order created
    C-->>US: Order response
    US-->>N: Order success
    N-->>U: Order confirmation
```

### üìä –ü–æ—Ç–æ–∫ –º–µ—Ç—Ä–∏–∫

```mermaid
graph LR
    subgraph "Application Services"
        APP1[Backend Service]
        APP2[Cart Service]
        APP3[Order Service]
        APP4[User Service]
    end

    subgraph "Infrastructure"
        NGINX[Nginx]
        CASS[Cassandra]
    end

    subgraph "Exporters"
        NGINX_EXP[Nginx Exporter]
        MCAC[MCAC Agent]
    end

    subgraph "Monitoring"
        PROM[Prometheus]
        GRAF[Grafana]
    end

    APP1 --"HTTP metrics"--> PROM
    APP2 --"Business metrics"--> PROM
    APP3 --"Order metrics"--> PROM
    APP4 --"User metrics"--> PROM
    
    NGINX --> NGINX_EXP
    NGINX_EXP --> PROM
    
    CASS --> MCAC
    MCAC --> PROM
    
    PROM --> GRAF
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Docker Compose –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```yaml
# –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
services:
  # Data Layer
  cassandra:          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  
  # Application Layer  
  backend:            # –¢–æ–≤–∞—Ä—ã –∏ –∫–∞—Ç–∞–ª–æ–≥
  cart-service:       # –ö–æ—Ä–∑–∏–Ω–∞
  order-service:      # –ó–∞–∫–∞–∑—ã
  user-service:       # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  
  # Infrastructure Layer
  nginx:              # Gateway
  swagger-ui:         # API Docs
  docs:               # Documentation
  
  # Monitoring Layer
  prometheus:         # –ú–µ—Ç—Ä–∏–∫–∏
  grafana:           # –î–∞—à–±–æ—Ä–¥—ã
  nginx-exporter:    # Nginx –º–µ—Ç—Ä–∏–∫–∏
  
  # Testing Layer
  locust:            # Load testing
```

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# Backend Service
CASSANDRA_HOST=cassandra
SECRET_KEY=supersecretkey123

# Cart Service
BACKEND_URL=http://backend:8000
ORDER_SERVICE_URL=http://order-service:8002

# Order Service
BACKEND_URL=http://backend:8000
USER_SERVICE_URL=http://user-service:8003

# User Service
CART_SERVICE_URL=http://cart-service:8001
ORDER_SERVICE_URL=http://order-service:8002
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### JWT —Ç–æ–∫–µ–Ω—ã
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: HS256
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **Payload**: username, —Ä–æ–ª—å (is_admin), –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: 30 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å
- **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–≤–∞—Ä–∞–º, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ú–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
1. **Authorization header**: `Bearer JWT_TOKEN`
2. **X-User-ID header**: –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
3. **Admin header**: –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ–∫—É—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ—Ä–∑–∏–Ω–∞–º –∏ –∑–∞–∫–∞–∑–∞–º
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP –≤—ã–∑–æ–≤—ã** –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **Connection pooling** –¥–ª—è Cassandra
- **Health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ë–î Cassandra
- Load balancing —á–µ—Ä–µ–∑ Nginx
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
