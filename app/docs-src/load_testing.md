# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Product Store –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –±–∞–∑–µ Locust –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. ProductSeeder (–û—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)
**–°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã —Å —É—á–µ—Ç–æ–º —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞—Ç—á–µ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (50 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ä–∞–∑)
- –ú–µ–≥–∞-–±–∞—Ç—á —Ä–µ–∂–∏–º (5000 —Ç–æ–≤–∞—Ä–æ–≤ —Å—Ä–∞–∑—É)

### 2. RegularUser (60% –Ω–∞–≥—Ä—É–∑–∫–∏)
**–ü–æ–ª–Ω—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∏—Å—Ç–æ—Ä–∏–∏

### 3. AdminUser (15% –Ω–∞–≥—Ä—É–∑–∫–∏)
**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞—Ç–∫–æ–≤
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –Ω–∏–∑–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º

### 4. AnonymousUser (20% –Ω–∞–≥—Ä—É–∑–∫–∏)  
**–ü—Ä–æ—Å–º–æ—Ç—Ä –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- Browsing —Ç–æ–≤–∞—Ä–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 5. StressUser (5% –Ω–∞–≥—Ä—É–∑–∫–∏)
**–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API
- –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ—Ä–∑–∏–Ω–æ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
cd infra
./locust/quick-commands.sh help
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `seed` - —Å–æ–∑–¥–∞–Ω–∏–µ 5000 —Ç–æ–≤–∞—Ä–æ–≤ (5-10 –º–∏–Ω—É—Ç)
- `seed-fast` - —Å–æ–∑–¥–∞–Ω–∏–µ 100 —Ç–æ–≤–∞—Ä–æ–≤ (–±—ã—Å—Ç—Ä–æ)
- `smoke` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (2 –º–∏–Ω—É—Ç—ã)
- `load` - –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç (10 –º–∏–Ω—É—Ç, 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- `stress` - —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç (5 –º–∏–Ω—É—Ç, 300 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- `ui` - –∑–∞–ø—É—Å–∫ Locust UI
- `monitor` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

Locust –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost/locust/**

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤:**

**üü¢ –õ–µ–≥–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:**
- Users: 20-50
- Spawn rate: 5 users/sec
- Duration: 5-10 –º–∏–Ω—É—Ç

**üü° –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞:**
- Users: 100-200
- Spawn rate: 10 users/sec  
- Duration: 10-20 –º–∏–Ω—É—Ç

**üî¥ –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç:**
- Users: 300-500
- Spawn rate: 20 users/sec
- Duration: 5-10 –º–∏–Ω—É—Ç

## üõ†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤

### –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å —É—á–µ—Ç–æ–º:
- **–°–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏** (–±–æ–ª—å—à–µ —Ñ—Ä—É–∫—Ç–æ–≤ –ª–µ—Ç–æ–º, —Å–ª–∞–¥–æ—Å—Ç–µ–π –∑–∏–º–æ–π)
- **–¶–µ–Ω–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–°–∫–∏–¥–æ–∫ –∏ –∞–∫—Ü–∏–π** (20% —Ç–æ–≤–∞—Ä–æ–≤)
- **–ë—Ä–µ–Ω–¥–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π**
- **–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏**

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- –§—Ä—É–∫—Ç—ã –∏ –æ–≤–æ—â–∏
- –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- –ú—è—Å–æ –∏ –ø—Ç–∏—Ü–∞
- –•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞
- –ù–∞–ø–∏—Ç–∫–∏
- –°–ª–∞–¥–æ—Å—Ç–∏
- –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- –ö–æ–Ω—Å–µ—Ä–≤—ã
- –ö—Ä—É–ø—ã –∏ –º–∞–∫–∞—Ä–æ–Ω—ã
- –°–ø–µ—Ü–∏–∏ –∏ –ø—Ä–∏–ø—Ä–∞–≤—ã
- –î–µ—Ç—Å–∫–æ–µ –ø–∏—Ç–∞–Ω–∏–µ
- –¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–í Locust UI:**
- RPS –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º
- Response times (P50, P95, P99)
- Failure rate –ø–æ API endpoints
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í Grafana:**
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- Database performance
- P99 latency –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
- Error rates –∏ –∞–ª–µ—Ä—Ç—ã

### –û–∂–∏–¥–∞–µ–º—ã–µ –∞–ª–µ—Ä—Ç—ã

–ü—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–±–æ—Ç–∞—Ç—å:
1. **High P99 Latency** (> 500ms)
2. **Database High RPS** (> 100)
3. **Memory Usage Alert** (> 80%)
4. **High Error Rate** (> 5%)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í —Ñ–∞–π–ª–µ `locustfile.py`:
```python
class RegularUser(BaseUser):
    weight = 60  # 60% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

class AdminUser(BaseUser):
    weight = 15  # 15% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏

```python
class RegularUser(BaseUser):
    wait_time = between(2, 8)  # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏

class StressUser(BaseUser):
    wait_time = between(0.1, 1)  # –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```

## üìà –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –•–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- P95 latency < 200ms
- P99 latency < 500ms  
- Error rate < 1%
- Successful requests > 99%

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- P99 latency > 1000ms
- Error rate > 5%
- CPU usage > 90% –¥–ª–∏—Ç–µ–ª—å–Ω–æ
- –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

### –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –æ—Ç—á–µ—Ç—ã
- HTML –æ—Ç—á–µ—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- CSV —Ñ–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- Real-time –º–µ—Ç—Ä–∏–∫–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üö® Troubleshooting

### –¢–æ–≤–∞—Ä—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–¥–º–∏–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –í—ã—Å–æ–∫–∏–π error rate
1. –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –£–≤–µ–ª–∏—á—å—Ç–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞—Ç—á–µ–≤—ã–π —Ä–µ–∂–∏–º
2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏
3. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã

–ü–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](architecture.md#–Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ).
