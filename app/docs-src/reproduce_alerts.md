# Как воспроизвести алерты

В рамках домашнего задания по Observability необходимо продемонстрировать работу двух алертов:

1. Если время ответа на целевую ручку в p99 превысила 500ms
2. Если количество RPS в БД больше 100

## Настройка окружения

Для воспроизведения алертов вам потребуется:

1. Запустить проект через Docker Compose:
   ```bash
   docker-compose -f infra/docker-compose.yml up -d
   ```

2. Убедиться, что все сервисы запущены и работают:
   ```bash
   docker-compose -f infra/docker-compose.yml ps
   ```

## Алерт 1: Превышение времени ответа API

Для воспроизведения этого алерта:

1. Откройте интерфейс нагрузочного тестирования Locust:
   ```
   http://localhost/load-tester/
   ```

2. Настройте параметры теста:
   - Host: `http://localhost`
   - Number of users: 50
   - Spawn rate: 10 users/second

3. Выберите сценарий "Heavy API Calls" и запустите тест.

4. Продолжайте тест до тех пор, пока не сработает алерт (обычно 1-2 минуты).

## Алерт 2: Превышение RPS в базе данных

Для воспроизведения этого алерта:

1. Откройте интерфейс нагрузочного тестирования Locust:
   ```
   http://localhost/load-tester/
   ```

2. Настройте параметры теста:
   - Host: `http://localhost`
   - Number of users: 100
   - Spawn rate: 20 users/second

3. Выберите сценарий "Database Intensive" и запустите тест.

4. Продолжайте тест до тех пор, пока не сработает алерт (обычно 30-60 секунд).

## Проверка алертов

Алерты настроены на отправку уведомлений в Telegram-канал:
[Ссылка на Telegram-канал с алертами](https://t.me/your_channel_name)

Также вы можете проверить статус алертов в интерфейсе Grafana:
```
http://localhost/grafana/alerts
```
